var Mustache;(function(e){if(typeof module!=="undefined"&&module.exports){module.exports=e}else if(typeof define==="function"){define(e)}else{Mustache=e}})(function(){function u(e,t){return RegExp.prototype.test.call(e,t)}function a(e){return!u(r,e)}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function p(e){this.string=e;this.tail=e;this.pos=0}function d(e,t){this.view=e;this.parent=t;this.clearCache()}function v(){this.clearCache()}function m(e){var t=e[3];var n=t;var r;while((r=e[4])&&r.length){e=r[r.length-1];n=e[3]}return[t,n]}function g(e){function n(e,n,r){if(!t[e]){var i=g(n);t[e]=function(e,t){return i(e,t,r)}}return t[e]}var t={};return function(t,r,i){var s="";var o,u;for(var a=0,f=e.length;a<f;++a){o=e[a];switch(o[0]){case"#":u=i.slice.apply(i,m(o));s+=t._section(o[1],r,u,n(a,o[4],i));break;case"^":s+=t._inverted(o[1],r,n(a,o[4],i));break;case">":s+=t._partial(o[1],r);break;case"&":s+=t._name(o[1],r);break;case"name":s+=t._escaped(o[1],r);break;case"text":s+=o[1];break}}return s}}function y(e){var t=[];var n=t;var r=[];var i,s;for(var o=0;o<e.length;++o){i=e[o];switch(i[0]){case"#":case"^":i[4]=[];r.push(i);n.push(i);n=i[4];break;case"/":if(r.length===0){throw new Error("Unopened section: "+i[1])}s=r.pop();if(s[1]!==i[1]){throw new Error("Unclosed section: "+s[1])}if(r.length>0){n=r[r.length-1][4]}else{n=t}break;default:n.push(i)}}s=r.pop();if(s){throw new Error("Unclosed section: "+s[1])}return t}function b(e){var t,n,r=[];for(var i=0;i<e.length;++i){t=e[i];if(n&&n[0]==="text"&&t[0]==="text"){n[1]+=t[1];n[3]=t[3]}else{n=t;r.push(t)}}return r}function w(e){if(e.length!==2){throw new Error("Invalid tags: "+e.join(" "))}return[new RegExp(l(e[0])+"\\s*"),new RegExp("\\s*"+l(e[1]))]}var e={};e.name="mustache.js";e.version="0.7.0";e.tags=["{{","}}"];e.Scanner=p;e.Context=d;e.Writer=v;var t=/\s*/;var n=/\s+/;var r=/\S/;var i=/\s*=/;var s=/\s*\}/;var o=/#|\^|\/|>|\{|&|=|!/;var f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var c={"&":"&","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.escape=h;p.prototype.eos=function(){return this.tail===""};p.prototype.scan=function(e){var t=this.tail.match(e);if(t&&t.index===0){this.tail=this.tail.substring(t[0].length);this.pos+=t[0].length;return t[0]}return""};p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n);this.tail=this.tail.substring(n);this.pos+=n}return t};d.make=function(e){return e instanceof d?e:new d(e)};d.prototype.clearCache=function(){this._cache={}};d.prototype.push=function(e){return new d(e,this)};d.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e==="."){t=this.view}else{var n=this;while(n){if(e.indexOf(".")>0){var r=e.split("."),i=0;t=n.view;while(t&&i<r.length){t=t[r[i++]]}}else{t=n.view[e]}if(t!=null){break}n=n.parent}}this._cache[e]=t}if(typeof t==="function"){t=t.call(this.view)}return t};v.prototype.clearCache=function(){this._cache={};this._partialCache={}};v.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r};v.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);this._partialCache[e]=r;return r};v.prototype.compileTokens=function(e,t){var n=g(e);var r=this;return function(e,i){if(i){if(typeof i==="function"){r._loadPartial=i}else{for(var s in i){r.compilePartial(s,i[s])}}}return n(r,d.make(e),t)}};v.prototype.render=function(e,t,n){return this.compile(e)(t,n)};v.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(f(i)){var s="";for(var o=0,u=i.length;o<u;++o){s+=r(this,t.push(i[o]))}return s}return i?r(this,t.push(i)):"";case"function":var a=this;var l=function(e){return a.render(e,t)};var c=i.call(t.view,n,l);return c!=null?c:"";default:if(i){return r(this,t)}}return""};v.prototype._inverted=function(e,t,n){var r=t.lookup(e);if(!r||f(r)&&r.length===0){return n(this,t)}return""};v.prototype._partial=function(e,t){if(!(e in this._partialCache)&&this._loadPartial){this.compilePartial(e,this._loadPartial(e))}var n=this._partialCache[e];return n?n(t):""};v.prototype._name=function(e,t){var n=t.lookup(e);if(typeof n==="function"){n=n.call(t.view)}return n==null?"":String(n)};v.prototype._escaped=function(t,n){return e.escape(this._name(t,n))};e.parse=function(r,u){function g(){if(v&&!m){while(d.length){h.splice(d.pop(),1)}}else{d=[]}v=false;m=false}u=u||e.tags;var f=w(u);var c=new p(r);var h=[],d=[],v=false,m=false;var E,S,x,T;while(!c.eos()){E=c.pos;x=c.scanUntil(f[0]);if(x){for(var N=0,C=x.length;N<C;++N){T=x.charAt(N);if(a(T)){d.push(h.length)}else{m=true}h.push(["text",T,E,E+1]);E+=1;if(T==="\n"){g()}}}E=c.pos;if(!c.scan(f[0])){break}v=true;S=c.scan(o)||"name";c.scan(t);if(S==="="){x=c.scanUntil(i);c.scan(i);c.scanUntil(f[1])}else if(S==="{"){var k=new RegExp("\\s*"+l("}"+u[1]));x=c.scanUntil(k);c.scan(s);c.scanUntil(f[1]);S="&"}else{x=c.scanUntil(f[1])}if(!c.scan(f[1])){throw new Error("Unclosed tag at "+c.pos)}h.push([S,x,E,c.pos]);if(S==="name"||S==="{"||S==="&"){m=true}if(S==="="){u=x.split(n);f=w(u)}}h=b(h);return y(h)};var E=new v;e.clearCache=function(){return E.clearCache()};e.compile=function(e,t){return E.compile(e,t)};e.compilePartial=function(e,t,n){return E.compilePartial(e,t,n)};e.compileTokens=function(e,t){return E.compileTokens(e,t)};e.render=function(e,t,n){return E.render(e,t,n)};e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i==="function"){i(s)}else{return s}};return e}())